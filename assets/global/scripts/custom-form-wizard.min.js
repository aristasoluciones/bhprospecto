var FormWizard={init:function(){if(jQuery().bootstrapWizard){var e=$("#frm-wizard"),r=$(".alert-danger",e),i=$(".alert-success",e);e.validate({lang:"es",doNotHideMessage:!0,errorElement:"span",errorClass:"help-block help-block-error",focusInvalid:!1,rules:{name:{required:!0},legal_representative:{required:!0},business_activity:{required:!0},regimen_id:{required:!0},constitution_date:{required:!0},leaflet_email:{required:!0,email:!0},contact_name:{required:!0},contact_phone:{required:!0},contact_email:{required:!0,email:!0},is_new_company:{required:!0},sale_amount:{required:!0},number_account_bank:{required:!0},invoice_per_month:{digits:!0,required:!0},deposit_per_month:{digits:!0,required:!0},transfer_per_month:{digits:!0,required:!0},expense_per_month:{digits:!0,required:!0},have_payroll:{required:!0},required_formulation_financial_state:{required:!0},required_formulation_specific_report:{required:!0},required_meeting:{required:!0},periodic_check_fiscal_mailbox:{required:!0},specific_help_tax_obligation:{required:!0},required_specific_transact_tax:{required:!0},expectation:{required:!0},other_service:{required:!0},"payment[]":{required:!0,minlength:1}},errorPlacement:function(e,r){"radio"==r.attr("type")?e.insertAfter("#"+r.attr("name")+"_error"):e.insertAfter(r)},invalidHandler:function(e,i){toastr.error("Campos requeridos","ERROR"),App.scrollTo(r,-200)},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},success:function(e){"is_new_company"==e.attr("for")||"payment[]"==e.attr("for")?(e.closest(".form-group").removeClass("has-error").addClass("has-success"),e.remove()):e.addClass("valid").closest(".form-group").removeClass("has-error").addClass("has-success")},submitHandler:function(e){var r=new FormData(e);r.set("type","save_new_leaflet"),$.ajax({url:WEB_ROOT+"/ajax/leaflet.php",method:"POST",data:r,contentType:!1,processData:!1,dataType:"json",success:function(r){toastr[r.status?"success":"error"](r.message),$("#frm-wizard").find("a[href*='tab1']").trigger("click"),r.status&&e.reset()}})}});var t=function(e,r,i){var t=r.find("li").length,a=(r.find("form").length,i+1);$(".step-title",$("#frm-wizard")).text("Step "+(i+1)+" of "+t),jQuery("li",$("#frm-wizard")).removeClass("done");for(var o=r.find("li"),s=0;s<i;s++)jQuery(o[s]).addClass("done");1==a?$("#frm-wizard").find(".button-previous").hide():$("#frm-wizard").find(".button-previous").show(),a>=t?($("#frm-wizard").find(".button-next").hide(),$("#frm-wizard").find(".button-submit").show()):($("#frm-wizard").find(".button-next").show(),$("#frm-wizard").find(".button-submit").hide()),App.scrollTo($(".page-title"))};$("#frm-wizard").bootstrapWizard({nextSelector:".button-next",previousSelector:".button-previous",onTabClick:function(a,o,s,n){if(i.hide(),r.hide(),0==e.valid())return!1;t(0,o,n)},onNext:function(a,o,s){if(i.hide(),r.hide(),!e.valid())return!1;t(0,o,s)},onPrevious:function(e,a,o){i.hide(),r.hide(),t(0,a,o)},onTabShow:function(e,r,i){var t=(i+1)/r.find("li").length*100;$("#frm-wizard").find(".progress-bar").css({width:t+"%"})}}),$("#frm-wizard").find(".button-previous").hide(),$("#frm-wizard .button-submit").click(function(){$("#frm-wizard").submit()}).hide()}}};jQuery(document).ready(function(){FormWizard.init(toastr)});